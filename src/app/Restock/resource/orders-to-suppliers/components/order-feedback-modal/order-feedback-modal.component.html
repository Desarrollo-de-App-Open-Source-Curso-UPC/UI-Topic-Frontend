<ng-template #feedbackTemplate>
  <div class="feedback-container">
    <h2 mat-dialog-title>
      <mat-icon class="feedback-icon">feedback</mat-icon>
      Dejar Feedback
      <span *ngIf="getSupplierProfile()">a {{ getSupplierProfile()?.name }}</span>
    </h2>

    <mat-dialog-content class="dialog-content">

      <!-- Resumen de la orden -->
      <mat-card class="summary-card" *ngIf="getSupplierProfile(); else noProfile">
        <mat-card-header>
          <mat-card-title>Resumen de la Orden</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="summary-item">
            <mat-icon>business</mat-icon>
            <span><strong>Proveedor:</strong> {{ getSupplierProfile()?.name }}</span>
          </div>
          <div class="summary-item">
            <mat-icon>call</mat-icon>
            <span><strong>Teléfono:</strong> {{ getSupplierProfile()?.phone }}</span>
          </div>
          <div class="summary-item">
            <mat-icon>event</mat-icon>
            <span><strong>Fecha:</strong> {{ order.date | date : "dd/MM/yyyy" }}</span>
          </div>
          <div class="summary-item">
            <mat-icon>attach_money</mat-icon>
            <span><strong>Total:</strong> S/. {{ order.total_price | number : "1.2-2" }}</span>
          </div>
        </mat-card-content>
      </mat-card>

      <ng-template #noProfile>
        <p class="no-profile">Información del proveedor no disponible.</p>
      </ng-template>

      <!-- Calificación -->
      <div class="section">
        <h3>Calificación</h3>
        <div class="stars">
          <mat-icon
            *ngFor="let star of [1, 2, 3, 4, 5]"
            (click)="setRating(star)"
            [ngClass]="{ selected: star <= rating }"
          >
            {{ star <= rating ? "star" : "star_border" }}
          </mat-icon>
        </div>
      </div>

      <!-- Comentario -->
      <mat-form-field appearance="outline" class="comment-box">
        <mat-label>Comentario</mat-label>
        <textarea matInput rows="4" [(ngModel)]="comment"></textarea>
      </mat-form-field>
    </mat-dialog-content>

    <!-- Acciones -->
    <mat-dialog-actions align="end">
      <button mat-button (click)="close()">Cancelar</button>
      <button
        mat-raised-button
        color="primary"
        (click)="submitFeedback()"
        [disabled]="rating === 0"
      >
        Enviar
      </button>
    </mat-dialog-actions>
  </div>
</ng-template>
