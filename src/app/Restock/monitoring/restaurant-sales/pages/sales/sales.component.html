<div class="ventas-container">
    <div class="ventas-header">
        <h2>Register your sales</h2>
        <button mat-raised-button color="primary" class="nueva-venta-btn" (click)="openRegisterSaleModal()">
            <span class="btn-content">
                NEW SALE
                <mat-icon>control_point</mat-icon>
            </span>
        </button>
    </div>

    <mat-divider></mat-divider>

    <p class="text-question">Want to update your inventory? Select the sales you want here:</p>
    <button mat-raised-button class="registered-sales-btn" (click)="openSalesNotAddedToInventoryModal()">
        <span class="btn-content">
            REGISTERED SALES NOT ADDED TO INVENTORY
            <mat-icon>view_list</mat-icon>
        </span>
    </button>

    <!-- Display when there are no recorded sales -->
    <div *ngIf="showHistorySalesAddedInInventory == false" class="ventas-empty">
        <p class="ventas-text">
            You currently have no recorded sales. Enter your sales here to keep your inventory up to date.
        </p>
        <mat-icon class="ventas-icon">room_service</mat-icon>
    </div>

    <!-- Display sales history when inventory has registered sales -->
    <div *ngIf="showHistorySalesAddedInInventory == true">
        <div class="flex-title-history-sales">
            <mat-icon>history</mat-icon>
            <p>History of sales updated in inventory</p>
        </div>

        <p class="subtitle">Registered sales that have already deducted supplies from inventory</p>

        <!-- Search filter for sales -->
        <mat-form-field appearance="outline" class="filter-field">
            <mat-label>Search for sale by code</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="E.g., Punto Limon" />
        </mat-form-field>

        <!-- Table displaying sales -->
        <div class="table-container">
            <table mat-table [dataSource]="dataSource" class="full-width-table">

                <!-- Sale code column -->
                <ng-container matColumnDef="code">
                    <th mat-header-cell *matHeaderCellDef> Code </th>
                    <td mat-cell *matCellDef="let row"> {{ row.code }} </td>
                </ng-container>

                <!-- Number of plates column -->
                <ng-container matColumnDef="plates">
                    <th mat-header-cell *matHeaderCellDef> Quantity of plates </th>
                    <td mat-cell *matCellDef="let row"> {{ row.quantity_plates }} </td>
                </ng-container>

                <!-- Additional supplies column -->
                <ng-container matColumnDef="additonal_supplies">
                    <th mat-header-cell *matHeaderCellDef> Quantity of additional supplies </th>
                    <td mat-cell *matCellDef="let row"> {{ row.quantity_additonal_supplies }} </td>
                </ng-container>

                <!-- Actions column -->
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> Actions </th>
                    <td mat-cell *matCellDef="let row"> <mat-icon>description</mat-icon> </td>
                </ng-container>

                <!-- Table rows -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>

        <!-- Paginator for table -->
        <div class="flex">
            <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 15]" showFirstLastButtons></mat-paginator>
        </div>
    </div>
</div>

<!-- Component: Register Sale Modal -->
<app-register-sales *ngIf="showModalRegisterSale" (close)="closeRegisterSaleModal()"
    (registersale)="onRegisterSale($event)">
</app-register-sales>

<!-- Component: Sale Confirmation Modal -->
<app-sale-confirmation *ngIf="showModalSaleConfirmation" (close)="closeSaleConfirmationModal()">
</app-sale-confirmation>

<!-- Component: Modal to show sales not yet added to inventory -->
<app-show-sales-not-added-to-inventory *ngIf="showModalSalesNotAddedToInventory"
    (close)="closeSalesNotAddedToInventoryModal()">
</app-show-sales-not-added-to-inventory>